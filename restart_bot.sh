#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Telegram –±–æ—Ç–∞ —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π

echo "ü§ñ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞ @lekenbot"

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python —Å –±–æ—Ç–∞–º–∏
echo "‚èπÔ∏è –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –±–æ—Ç—ã..."
pkill -f "telegram_bot.py"
pkill -f "simple_telegram_bot.py"

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 2 —Å–µ–∫—É–Ω–¥—ã
sleep 2

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Å—Ç–æ–π –±–æ—Ç
echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Å—Ç–æ–≥–æ –±–æ—Ç–∞..."
cd backend
nohup python3 simple_telegram_bot.py > bot.log 2>&1 &

# –ü–æ–ª—É—á–∏—Ç—å PID –ø—Ä–æ—Ü–µ—Å—Å–∞
BOT_PID=$!
echo "‚úÖ –ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (PID: $BOT_PID)"

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
echo "üìù –õ–æ–≥–∏ –±–æ—Ç–∞:"
sleep 1
tail -f bot.log