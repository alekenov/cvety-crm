# Отчет о состоянии страниц Cvety.kz CRM

## Проверка выполнена: 29.07.2025
- Frontend: http://localhost:5174
- Backend: http://localhost:8000

## Статус страниц и API

### ✅ Полностью рабочие страницы

#### 1. Главная страница (/)
- **Статус**: ✅ Работает
- **API**: Использует данные из `/api/orders/` и `/api/settings/`

#### 2. Заказы (/orders)
- **Статус**: ✅ Работает
- **API endpoints**:
  - `GET /api/orders/` - ✅ Работает (8 заказов)
  - `GET /api/orders/{id}` - ✅ Работает
  - `PATCH /api/orders/{id}/status` - ✅ Работает
  - `PATCH /api/orders/{id}/issue` - ✅ Работает
- **Подстраницы**:
  - `/orders/new` - ✅ Создание нового заказа
  - `/orders/{id}` - ✅ Просмотр и редактирование заказа

#### 3. Клиенты (/customers)
- **Статус**: ✅ Работает
- **API endpoints**:
  - `GET /api/customers/` - ✅ Работает (13 клиентов)
  - `GET /api/customers/{id}` - ✅ Работает
  - `GET /api/customers/{id}/orders` - ✅ Работает
  - `PUT /api/customers/{id}` - ✅ Работает
- **Подстраницы**:
  - `/customers/{id}` - ✅ Карточка клиента с редактированием

#### 4. Склад (/warehouse)
- **Статус**: ✅ Работает
- **API endpoints**:
  - `GET /api/warehouse/` - ✅ Работает (5 товаров)
  - `POST /api/warehouse/delivery` - ✅ Работает
- **Подстраницы**:
  - `/warehouse/delivery` - ✅ Приемка товаров

#### 5. Настройки (/settings)
- **Статус**: ✅ Работает
- **API endpoints**:
  - `GET /api/settings/` - ✅ Работает
  - `PUT /api/settings/` - ✅ Работает
- **Подстраницы**:
  - `/settings/users` - ⚠️ UI есть, но нет backend для пользователей

#### 6. Трекинг (/tracking)
- **Статус**: ✅ Работает
- **API endpoints**:
  - `GET /api/tracking/{token}` - ✅ Работает
- **Особенности**: Публичная страница, не требует авторизации

### ⚠️ Частично рабочие страницы

#### 7. Производство (/production)
- **Статус**: ⚠️ Частично работает
- **API endpoints**:
  - `GET /api/production/tasks` - ❌ 404 Not Found
  - `GET /api/production/queue/stats` - ✅ Работает
- **Подстраницы**:
  - `/production/calculator` - ✅ UI работает (калькулятор букетов)
- **Проблемы**: Основной endpoint для задач не реализован

### ❌ Нерабочие страницы

#### 8. Каталог (/catalog)
- **Статус**: ❌ Не работает
- **API endpoints**:
  - `GET /api/products` - ❌ 404 Not Found
  - `POST /api/products` - ❌ 404 Not Found
- **Подстраницы**:
  - `/catalog/new` - ❌ Создание товара не работает
- **Проблемы**: API для продуктов не реализован

## Синхронизация данных

### ✅ Работающая синхронизация:
1. **Заказы ↔ Клиенты**: При создании заказа автоматически создается клиент
2. **Заказы → Трекинг**: Токены генерируются автоматически
3. **Склад → Заказы**: Остатки учитываются при создании заказов

### ⚠️ Проблемы синхронизации:
1. **Продукты**: Нет связи между каталогом и складом
2. **Производство**: Задачи не связаны с заказами
3. **Пользователи**: Нет системы авторизации и ролей

## Рекомендации по исправлению

### Критические:
1. Реализовать API для продуктов (`/api/products`)
2. Реализовать API для производственных задач (`/api/production/tasks`)
3. Связать производственные задачи с заказами

### Важные:
1. Добавить систему пользователей и авторизации
2. Связать продукты со складом
3. Добавить загрузку изображений для продуктов

### Желательные:
1. Добавить статистику на главную страницу
2. Реализовать экспорт данных
3. Добавить систему уведомлений

## База данных

**SQLite**: `backend/flower_shop.db`

### Таблицы:
- ✅ orders (8 записей)
- ✅ customers (13 записей)  
- ✅ warehouse_items (5 записей)
- ✅ company_settings (1 запись)
- ✅ florist_tasks (2 записи)
- ❌ products (таблица есть, но не используется)
- ❌ users (таблица отсутствует)