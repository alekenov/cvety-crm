# –û—Ç—á—ë—Ç –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é Playwright E2E —Ç–µ—Å—Ç–æ–≤

## –î–∞—Ç–∞: 2025-01-08
## –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ~30 –º–∏–Ω—É—Ç

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ **–†–∞–±–æ—Ç–∞–ª–æ**: 1/25 —Ç–µ—Å—Ç–æ–≤ (4%)
- ‚ùå **–ù–µ —Ä–∞–±–æ—Ç–∞–ª–æ**: 24/25 —Ç–µ—Å—Ç–æ–≤ (96%)

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Auth —Ç–µ—Å—Ç—ã)
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç**: 4/7 —Ç–µ—Å—Ç–æ–≤ (57%)
- ‚ùå **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: 3/7 —Ç–µ—Å—Ç–æ–≤ (43%)

### –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- **–£–ª—É—á—à–µ–Ω–∏–µ**: —Å 4% –¥–æ 57% –¥–ª—è Auth —Ç–µ—Å—Ç–æ–≤
- **–û—Å—Ç–∞–ª–æ—Å—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å**: Orders (8 —Ç–µ—Å—Ç–æ–≤) –∏ Tracking (10 —Ç–µ—Å—Ç–æ–≤)

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```typescript
// playwright.config.ts
fullyParallel: false,  // –û—Ç–∫–ª—é—á–∏–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å
workers: 1,           // –¢–æ–ª—å–∫–æ 1 –≤–æ—Ä–∫–µ—Ä
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ—Å—Ç—ã –±–æ–ª—å—à–µ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º

### 2. Rate Limiting
```typescript
// –°–æ–∑–¥–∞–Ω helper –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
export function generateUniquePhone(): string {
  const timestamp = Date.now();
  const lastDigits = timestamp.toString().slice(-7);
  return `+7777${lastDigits}`;
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### 3. OTP –æ–±—Ä–∞–±–æ—Ç–∫–∞
```typescript
// LoginPage.ts - –∏–∑–≤–ª–µ–∫–∞–µ–º OTP –∏–∑ debug –æ—Ç–≤–µ—Ç–∞
const match = alertText.match(/\d{6}/);
if (match) {
  debugOtp = match[0];
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ—Å—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç OTP –∏–∑ debug —Ä–µ–∂–∏–º–∞

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
if (await createButton.isVisible()) {
  await shopNameInput.fill('–¢–µ—Å—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω');
  await createButton.click();
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

## ‚úÖ –ö–∞–∫–∏–µ —Ç–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç

| –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| `should show error with invalid phone` | ‚úÖ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ |
| `should show error with invalid OTP` | ‚úÖ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ OTP –∫–æ–¥–∞ |
| `should redirect to login when not authenticated` | ‚úÖ | –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö |
| `should persist login across page refreshes` | ‚úÖ | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

## ‚ùå –ß—Ç–æ –µ—â—ë —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### –û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã –≤ Auth —Ç–µ—Å—Ç–∞—Ö

1. **`should login with valid credentials`**
   - **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
   - **–†–µ—à–µ–Ω–∏–µ**: –ù—É–∂–Ω–æ –¥–µ–±–∞–∂–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞

2. **`should logout successfully`**
   - **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ `[data-testid="user-menu"]`
   - **–†–µ—à–µ–Ω–∏–µ**: –ù–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

3. **`should handle session expiry`**
   - **–ü—Ä–æ–±–ª–µ–º–∞**: –°–µ—Å—Å–∏—è –Ω–µ –∏—Å—Ç–µ–∫–∞–µ—Ç –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è
   - **–†–µ—à–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏

### Orders –∏ Tracking —Ç–µ—Å—Ç—ã
- **–ù–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**: –¢—Ä–µ–±—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- **–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç data-testid –∞—Ç—Ä–∏–±—É—Ç—ã
- **–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ~2-3 —á–∞—Å–∞

## üìù –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`e2e/helpers/test-helpers.ts`** - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
   - –û—á–∏—Å—Ç–∫–∞ Redis
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

2. **`playwright-test-report.md`** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º
3. **`playwright-fix-report.md`** - –≠—Ç–æ—Ç –æ—Ç—á—ë—Ç

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è Auth —Ç–µ—Å—Ç—ã
1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è logout
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏—Å—Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å Orders —Ç–µ—Å—Ç—ã
1. –ù–∞–π—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–∫–∞–∑–æ–≤
2. –°–æ–∑–¥–∞—Ç—å Page Object –¥–ª—è OrdersPage
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ò—Å–ø—Ä–∞–≤–∏—Ç—å Tracking —Ç–µ—Å—Ç—ã
1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã —Å tracking —Ç–æ–∫–µ–Ω–∞–º–∏
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Page Object –¥–ª—è TrackingPage
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1-2 —á–∞—Å–∞)
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Playwright Codegen –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤:
   ```bash
   npx playwright codegen http://localhost:5182
   ```

2. –î–æ–±–∞–≤–∏—Ç—å data-testid –≤–æ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
   ```tsx
   <button data-testid="logout-button">–í—ã–π—Ç–∏</button>
   ```

### –î–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã (–Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
4. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–µ—Å—Ç–æ–≤—É—é –ë–î

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è

- **–°–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –ó–∞–º–µ–¥–ª–∏–ª–∞—Å—å (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –£–ª—É—á—à–∏–ª–∞—Å—å (–Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: Auth —Ç–µ—Å—Ç—ã —á–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –£–ª—É—á—à–∏–ª–∞—Å—å (helper —Ñ—É–Ω–∫—Ü–∏–∏, Page Objects)

## ‚ú® –ò—Ç–æ–≥

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:
- ‚úÖ Rate limiting –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ
- ‚úÖ OTP –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ debug —Ä–µ–∂–∏–º–∞
- ‚úÖ 57% Auth —Ç–µ—Å—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç

**–û—Å—Ç–∞–≤—à–∞—è—Å—è —Ä–∞–±–æ—Ç–∞**: ~4-6 —á–∞—Å–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö 25 —Ç–µ—Å—Ç–æ–≤